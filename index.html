<!DOCTYPE html>
<html lang="ar" dir="rtl" id="html-tag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Language Translation</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <style>
        /* [Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±] */
        :root {
            --primary-color: #00c6ff;
            --secondary-color: #0072ff;
            --accent-color: #9d50bb;
            --dark-bg: #0f0c29;
            --text-color: #ffffff;
            --glass: rgba(255, 255, 255, 0.05);
            --card-bg: rgba(15, 12, 41, 0.85);
            --glow: 0 0 15px rgba(0, 198, 255, 0.5);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--dark-bg); color: var(--text-color); overflow-x: hidden; line-height: 1.6; }
        .background-animation { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e); }
        .cube { position: absolute; width: 60px; height: 60px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); animation: floatUp 15s linear infinite; bottom: -100px; }
        @keyframes floatUp { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; } }
        header { position: sticky; top: 0; z-index: 1000; display: flex; justify-content: space-between; align-items: center; padding: 10px 5%; background: rgba(15, 12, 41, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid var(--secondary-color); }
        .logo-container { display: flex; align-items: center; gap: 10px; }
        .logo-img { width: 45px; height: 45px; border-radius: 50%; box-shadow: var(--glow); }
        .logo-text { font-size: 1.4rem; font-weight: 900; background: linear-gradient(90deg, var(--primary-color), var(--accent-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .lang-switch { background: var(--glass); border: 1px solid var(--primary-color); color: white; padding: 6px 15px; border-radius: 20px; cursor: pointer; transition: 0.3s; }
        main { max-width: 1000px; margin: 0 auto; padding: 40px 20px; }
        .slogan-section { text-align: center; margin-bottom: 40px; }
        .slogan-section h1 { font-size: 2.2rem; margin-bottom: 15px; color: var(--primary-color); text-shadow: var(--glow); }
        .concept-card { background: var(--card-bg); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 50px; text-align: center; }
        .tool-container { background: rgba(255,255,255,0.05); padding: 30px; border-radius: 30px; border: 2px solid var(--primary-color); text-align: center; margin-bottom: 40px; }
        .upload-controls { display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .custom-upload-btn { background: var(--glass); border: 2px dashed var(--primary-color); padding: 15px 30px; border-radius: 15px; cursor: pointer; transition: 0.3s; }
        .btn-main-action { background: linear-gradient(45deg, var(--secondary-color), var(--accent-color)); border: none; color: white; padding: 15px 60px; font-size: 1.4rem; font-weight: bold; border-radius: 50px; cursor: pointer; transition: 0.4s; }
        .comparison-grid { display: none; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        .v-box { background: #000; border-radius: 15px; overflow: hidden; border: 1px solid var(--primary-color); }
        video { width: 100%; height: auto; display: block; }
        footer { background: #050414; padding: 40px; text-align: center; border-top: 1px solid var(--glass); }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
    </style>
</head>
<body id="html-tag">

    <div class="background-animation">
        <div class="cube" style="left:10%"></div>
        <div class="cube" style="left:40%"></div>
        <div class="cube" style="left:70%"></div>
    </div>

    <header>
        <div class="logo-container">
            <img src="https://h.top4top.io/p_3644h7fm31.png" alt="Logo" class="logo-img">
            <div class="logo-text">Sign Language Translation</div>
        </div>
        <button class="lang-switch" onclick="toggleLanguage()" id="lang-btn">English</button>
    </header>

    <main>
        <section class="slogan-section">
            <h1 id="txt-slogan">Ø¬Ø³Ø±ÙŒ Ø±Ù‚Ù…ÙŠ ÙŠÙ…Ù†Ø­ Ø§Ù„ØµÙˆØª Ù„ØºØ©Ù‹ Ø¨ØµØ±ÙŠØ©.. Ù„Ù†ØµÙ†Ø¹ Ù…Ø­ØªÙˆÙ‹Ù‰ ÙŠØ´Ù…Ù„ Ø§Ù„Ø¬Ù…ÙŠØ¹.</h1>
        </section>

        <section class="concept-card">
            <h3 id="txt-concept-title" style="color: var(--primary-color); margin-bottom: 10px;">ÙÙƒØ±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h3>
            <p id="txt-concept-body">ÙŠÙØ¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù†ØµØ© Ø§Ø¨ØªÙƒØ§Ø±ÙŠØ© ØªØ¯Ù…Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆØ§Ù„Ø±Ø³ÙˆÙ…ÙŠØ§Øª Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ù„ØªÙ…ÙƒÙŠÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø­ØªÙˆÙ‰.</p>
        </section>

        <section class="tool-container">
            <h2 id="txt-tool-title" style="margin-bottom: 25px;">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¢Ù†</h2>
            
            <div class="upload-controls">
                <label for="video-upload" class="custom-upload-btn" id="txt-choose-btn">ğŸ“ Ø§Ø®ØªØ± Ù…Ù„Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ø±ÙØ¹</label>
                <input type="file" id="video-upload" accept="video/*" style="display:none" onchange="handleFile(event)">
                <p id="file-name" style="color: var(--primary-color); font-weight: bold;"></p>

                <div class="g-recaptcha" data-sitekey="Ø¶Ø¹_Ù…ÙØªØ§Ø­Ùƒ_Ø§Ù„Ø¬Ø¯ÙŠØ¯_Ù‡Ù†Ø§"></div>

                <button class="btn-main-action" onclick="runProcess()" id="txt-main-btn">ØªØ±Ø¬Ù… Ø¥Ù„Ù‰ Ù„ØºØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø©</button>
                <div id="status-msg" style="margin-top: 15px;"></div>
            </div>

            <div class="comparison-grid" id="comp-grid">
                <div class="v-box">
                    <h4 id="txt-label-orig">ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h4>
                    <video id="v-orig" controls></video>
                </div>
                <div class="v-box">
                    <h4 id="txt-label-avatar">Ø§Ù„Ø£ÙØ§ØªØ§Ø± Ø§Ù„Ù…ØªØ±Ø¬Ù…</h4>
                    <video id="v-avatar" controls></video>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-grid">
            <div id="txt-footer-team"><h3>Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ†ÙÙŠØ°</h3><p>Ø£Ù†Ø³ Ø­Ø³ÙŠÙ† Ø§Ù„ØµØ¨ÙŠØ­Ø§Øª | Ø£Ø­Ù…Ø¯ Ù…ØµØ·ÙÙ‰ Ø±Ù…Ø¶Ø§Ù† | Ø³Ø§Ù…Ø± Ø¬Ù‡Ø§Ø¯ Ø£Ø¨Ùˆ Ù„Ø§ÙˆÙŠ | Ø¹Ù…Ø§Ø± Ù…Ø­Ù…Ø¯ Ø§Ù„ÙØ³ÙÙˆØ³</p></div>
        </div>
    </footer>

    <script>
        let currentLang = 'ar';
        const content = {
            ar: { msgWait: "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ§Ù„ØªØ±Ø¬Ù…Ø©...", msgDone: "âœ¨ Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„ØªØ±Ø¬Ù…Ø©!", captchaErr: "ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù†Ùƒ Ù„Ø³Øª Ø±ÙˆØ¨ÙˆØª!" },
            en: { msgWait: "â³ Analyzing...", msgDone: "âœ¨ Done!", captchaErr: "Please verify you're not a robot!" }
        };

        function handleFile(e) {
            const file = e.target.files[0];
            if(file) {
                document.getElementById('file-name').textContent = "âœ” " + file.name;
                document.getElementById('v-orig').src = URL.createObjectURL(file);
            }
        }

        // Ø§Ù„Ø±Ø¨Ø· Ø§Ù„ÙØ¹Ù„ÙŠ Ù…Ø¹ ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø§ÙŠØ«ÙˆÙ† (app.py)
        function runProcess() {
            const fileInput = document.getElementById('video-upload');
            const file = fileInput.files[0];
            const msg = document.getElementById('status-msg');
            const grid = document.getElementById('comp-grid');
            const captcha = grecaptcha.getResponse();

            if(!file) { alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙÙŠØ¯ÙŠÙˆ!"); return; }
            if(!captcha) { alert(content[currentLang].captchaErr); return; }

            msg.innerHTML = content[currentLang].msgWait;
            
            // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø³ÙŠØ±ÙØ± (app.py ÙŠØªÙˆÙ‚Ø¹ Ø§Ø³Ù… 'video')
            const formData = new FormData();
            formData.append('video', file); 

            fetch('/process', { // Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø¹Ø±Ù ÙÙŠ app.py
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if(data.status === 'success') {
                    msg.innerHTML = content[currentLang].msgDone + " <br> Ø§Ù„Ù†Øµ: " + data.text;
                    grid.style.display = 'grid';
                    document.getElementById('v-avatar').src = data.video_url; // Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
                    document.getElementById('v-orig').play();
                    document.getElementById('v-avatar').play();
                } else {
                    msg.innerHTML = "âŒ Ø®Ø·Ø£: " + data.message;
                }
            })
            .catch(error => {
                msg.innerHTML = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±";
                console.error(error);
            });
        }
    </script>
</body>
</html>